---
title: js新大陆
date: 2019-09-03 13:22:34
tags:
- JavaScript
---
#### js二进制原码、反码、补码
原码：`1`表示负号，`0`表示正号。其他位存放该数的二进制的绝对值。
反码：正数的反码还是等于原码。负数的反码就是他的原码除符号位外，按位取反。
补码：正数的补码等于他的原码。负数的补码等于反码 +1。
整数输入计算机，正整数用`原码`存储，负整数用`补码`存储。

#### js位运算符
1. 非位运算 NOT：`~`是按位取反的意思，1.把运算数转换成 32 位数字；2.把二进制数转换成它的二进制反码；3.把二进制数转换成浮点数
``` js
// 位运算 NOT 实质上是对数字求负，然后减 1
var iNum1 = 25;		//25 等于 00000000000000000000000000011001
var iNum2 = ~iNum1;	//转换为 11111111111111111111111111100110
alert(iNum2);		//输出 "-26"
```
2. 与位运算 AND：`&`，0|1 0|0取0，1|1取1
``` js
var iResult = 3 & 2; // 0011 & 0010 = 0010
alert(iResult);	//输出 "2" 
```
3. 或位运算 OR：`|`，0|0取0，0|1 1|1取1
``` js
var iResult = 3 | 2; // 0011 & 0010 = 0011
alert(iResult);	//输出 "3" 
```
4. 异或位运算 XOR：`^`，相同取0，不同取1
``` js
var iResult = 3 | 2; // 0011 & 0010 = 0001
alert(iResult);	//输出 "1" 
```
5. 左移运算：`<<` ，它把数字中的所有数位向左移动指定的数量，右边的0补全
6. 有符号右移运算：`>>` ，该操作符会将第一个操作数向右移动指定的位数。向右被移出的位被丢弃，拷贝最左侧的位以填充左侧(符号位都是用0表示“正”，用1表示“负”)
``` js
// 32bit数据
-9 >> 2
11111111111111111111111111110111  // -9 
11111111111111111111111111111101   // -9 >> 2
```
7. 无符号右移运算：`>>>` ，该操作符会将第一个操作数向右移动指定的位数。向右被移出的位被丢弃，左侧用0填充。因为符号位变成了 0，所以结果总是非负的。（即便右移 0 个比特，结果也是非负的。）
``` js
9 >>> 2
00000000000000000000000000001001   // 9 
00000000000000000000000000000010 // 9 >>> 2
```
8. 无符号移位0 `>>> 0` ：移位操作符在移位前做了两种转换，第一将不是number类型的数据转换为number，第二将number转换为无符号的32bit数据，也就是Uint32类型。这些与移位的位数无关，移位0位主要就是用了js的内部特性做了前两种转换。
``` js
// 转为number类型，Math.ceil(x)向上取整，Math.floor(x)向下取整
function ToInteger(x) {
    x = Number(x);
    return x < 0 ? Math.ceil(x) : Math.floor(x);
}
// 转为Uint32类型，如果是正数，返回正数，如果是负数，返回负数+2的32次方，Math.pow(2, 32)+2的32次方
function modulo(a, b) {
    return a - Math.floor(a/b)*b;
}
function ToUint32(x) {
    return modulo(ToInteger(x), Math.pow(2, 32));
}
```
