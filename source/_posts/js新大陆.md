---
title: js新大陆
date: 2019-09-03 13:22:34
tags:
- JavaScript
---
#### n.toString(2)转二进制
#### js表达式里`>>`、`>>>`、`>>>0`浅析
1. `>>`有符号移位：该操作符会将第一个操作数向右移动指定的位数。向右被移出的位被丢弃，拷贝最左侧的位以填充左侧(符号位都是用0表示“正”，用1表示“负”)
``` js
// 32bit数据
-9 >> 2
11111111111111111111111111110111  // -9 
11111111111111111111111111111101   // -9 >> 2
```
2. `>>>`无符号移位：该操作符会将第一个操作数向右移动指定的位数。向右被移出的位被丢弃，左侧用0填充。因为符号位变成了 0，所以结果总是非负的。（即便右移 0 个比特，结果也是非负的。）
``` js
9 >>> 2
00000000000000000000000000001001   // 9 
00000000000000000000000000000010 // 9 >>> 2
```
3. `>>>0`无符号移位0：移位操作符在移位前做了两种转换，第一将不是number类型的数据转换为number，第二将number转换为无符号的32bit数据，也就是Uint32类型。这些与移位的位数无关，移位0位主要就是用了js的内部特性做了前两种转换。
``` js
// 转为number类型，Math.ceil(x)向上取整，Math.floor(x)向下取整
function ToInteger(x) {
    x = Number(x);
    return x < 0 ? Math.ceil(x) : Math.floor(x);
}
// 转为Uint32类型，如果是正数，返回正数，如果是负数，返回负数+2的32次方，Math.pow(2, 32)+2的32次方
function modulo(a, b) {
    return a - Math.floor(a/b)*b;
}
function ToUint32(x) {
    return modulo(ToInteger(x), Math.pow(2, 32));
}
```
补充：二进制原码、反码、补码
原码：‘1’表示负号，‘0’表示正号。其他位存放该数的二进制的绝对值。
反码：正数的反码还是等于原码。负数的反码就是他的原码除符号位外，按位取反。
补码：正数的补码等于他的原码。负数的补码等于反码+1。
一般负数用补码表示

