---
title: js正则表达式
date: 2019-09-05 15:21:35
tags:
- JavaScript
---
#### js正则表达式
1. 正则表达式的组成：正则表达式 = 普通字符+特殊字符（元字符）
``` js
// 创建正则表达式的两种方式
const re = /ab+c/g
const reg = /\d/g
// 或者
let re = new RegExp("ab+c", 'g')//ab+c/g
const reg1 = new RegExp("\\d","g")//要加转义符号
/* g 是全局搜索; 
    i 不区分大小写;
    m 多行搜索; 
    s 允许 . 匹配换行符; 
    u 使用unicode码的模式进行匹配; 
    y	执行“粘性”搜索,匹配从目标字符串的当前位置开始，可以使用y标志。*/
```
2. 匹配符：用于匹配某个或某些字符，通过一对方括号括`[]`起来的内容，其表示的是一个范围，但是实际匹配时，只能匹配固定的某个字符。
`[a-z]` ：匹配小写字母从a-z中的任一字符
`[A-Z] `：匹配大写字母从A-Z中的任一字符
`[0-9]` ：匹配数字从0-9任一字符，相当于\d
`[0-9a-z]` ：匹配数字从0-9或小写字母从a-z任一字符
`[0-9a-zA-Z]` ：匹配数字从0-9，小写字母从a-z或者是大写字母从A-Z的任一字符
`[abcd]` ：匹配字符abcd中的任一字符
`[1234]` ：匹配数字1234中的任一字符
在字符簇中存在一个特殊符号^（脱字节），脱字节在字符簇代表取反的含义
`[^a-z]` ：匹配除小写字母从a-z以外的任一字符
`[^0-9]` ：匹配除数字从0-9以外的任一字符
`[^abcd]` ：匹配除abcd以外的任一字符
在正则表达式中还有一类特殊字符，如下所示：
`\d` ：匹配一个数字字符，用字符簇表示[0-9]
`\D` ：匹配一个非数字字符，也可以使用字符簇[^0-9]或[^\d]来表示
`\w` ：匹配包括下划线的任何单词字符，用字符簇[0-9a-zA-Z_]
`\W` ：匹配任何非单词字符，[^0-9a-zA-Z_]或[^\w]
`\s` ：匹配任何空白字符，空格、制表符、换行符都可以通过\s匹配
`\S` ：匹配任何非空白字符，[^\s]
`.`（我是一个点号） ：匹配除 "\n" 之外的任何单个字符

3. 限定符：限定符可以指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。
`*` 匹配前面的子表达式零次或多次，0到多，可以使用`{0,}`代替
`+` 匹配前面的子表达式一次或多次，1到多，可以使用`{1,}`代替
`?` 匹配前面的子表达式零次或一次，0或1，可以使用`{0,1}`代替
`{n}` 匹配确定的 n 次，如`{18}`，连续匹配18次
`{n,}` 至少匹配n 次，如`{1,}`，代表最少匹配1次
`{n,m}` 最少匹配 n 次且最多匹配 m 次，如`{1,7}`代表最少匹配1最多匹配7次

4. 定位符：定位符可以将一个正则表达式固定在一行的开始或结束。也可以创建只在单词内或只在单词的开始或结尾处出现的正则表达式。
`^` 匹配输入字符串的开始位置（以***开始）
`$` 匹配输入字符串的结束位置（以***结束）
`\b` 匹配一个单词边界（字符串开头、结尾、空格、逗号、点号等符号）
`\B` 匹配非单词边界

5. 转义符：在正则表达式中，如果遇到特殊符号，我们必须要使用转义字符（`反斜杠\`）来进行转义。
（） [ ] * + ? .（我是点号） / \ ^ $

6. 选择匹配符：在正则表达式，如果要匹配的内容包含多个选择，我们可以通过`|`选择匹配符来进行匹配

7. 特殊用法
    1. `(?=)` ：正向预查(匹配结果?=匹配条件，必须满足匹配条件，才能输出匹配结果)
    2. `(?!)` ：负向预查
    3. `(?:)` ：输出内容，但不捕获
    ``` js
    const str="你好sam 你好Lilith 你好alice"
    const reg1 = new RegExp("你好(?=sam)", "g")
    const reg2 = new RegExp("你好(?!sam)", "g")
    const reg3 = new RegExp("你好(?:sam)", "g")
    console.log(str.match(reg1),"结果索引是："+reg1.lastIndex)//[ '你好' ] 结果索引是：0
    console.log(str.match(reg2),"结果索引是："+str.search(reg2))//[ '你好', '你好' ] 结果索引是：6
    console.log(str.match(reg3),"结果索引是："+reg3.lastIndex)//[ '你好sam' ] 结果索引是：0
    ```
8. 使用正则表达式
``` js
reg.exec(str)	    //查找字符串str是否匹配reg规则，它返回一个数组（未匹配到则返回 null）。 [ 'abbc', index: 0, input: 'abbc', groups: undefined ]
reg.test(str)	    //测试字符串str否匹配reg规则，匹配返回 true 或 不匹配返回false。
str.match(reg)	    //一个在字符串中执行查找匹配的String方法，它返回一个结果数组，在未匹配到时会返回 null。
str.matchAll(reg)	//一个在字符串中执行查找所有匹配的String方法，它返回一个迭代器（iterator）。Object [RegExp String Iterator] {}
str.search(reg)	    //一个在字符串中测试匹配的String方法，它返回匹配到的位置索引，或者不存在时返回-1。
str.replace(reg, str2)	    //一个在字符串中执行查找匹配的String方法，并且使用替换字符串替换掉匹配到的子字符串。
str.split(reg)	        //一个使用正则表达式，并将分隔后的子字符串存储到数组中。
```
